{% extends "base.html" %}

{% block content %}
<div class="welcome-container">
  <h2 class="page-title fade-in">üèÜ –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ OddlyOdds Production</h2>
  <p class="fade-in-delay">–ò–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω–∞—è –ø–∞–Ω–µ–ª—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ —Å–ø–æ—Ä—Ç–∏–≤–Ω—ã—Ö –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç–æ–≤ –∏ —Å–æ–±—ã—Ç–∏–π –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏ ‚öôÔ∏è</p>

  <!-- ====== –ë–ª–æ–∫ –∏–∫–æ–Ω–æ–∫ ====== -->
  <div class="sports-icons fade-in-slow">
    <div class="icon-card">
      <img src="{{ url_for('static', filename='images/soccer.png') }}" alt="Soccer">
      <p>‚öΩ –§—É—Ç–±–æ–ª (Soccer)</p>
    </div>
    <div class="icon-card">
      <img src="{{ url_for('static', filename='images/basketball.png') }}" alt="Basketball">
      <p>üèÄ –ë–∞—Å–∫–µ—Ç–±–æ–ª (NBA)</p>
    </div>
    <div class="icon-card">
      <img src="{{ url_for('static', filename='images/esports.png') }}" alt="Esports">
      <p>üéÆ –ö–∏–±–µ—Ä—Å–ø–æ—Ä—Ç (Esports)</p>
    </div>
  </div>

  <!-- ====== –í–∫–ª–∞–¥–∫–∏ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ ====== -->
  <div class="tabs fade-in-late">
    <button onclick="location.href='/live'" class="tab-btn">üî¥ Live</button>
    <button onclick="location.href='/prematch'" class="tab-btn">üïí Prematch</button>
    <button onclick="location.href='/matches'" class="tab-btn">üìä Matches</button>
    <button onclick="location.href='/esports'" class="tab-btn">üéÆ Esports</button>
  </div>

  <!-- ====== –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä —Ç–∞–±–ª–∏—Ü—ã —Å shimmer ====== -->
  <div id="matches-container" class="fade-in-late"></div>

  <!-- ====== –ò–Ω—Ñ–æ –±–ª–æ–∫ ====== -->
  <div class="welcome-panel fade-in-late">
    <p>
      –°–ª–µ–¥–∏—Ç–µ –∑–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–µ–º –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç–æ–≤ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏, –∞–Ω–∞–ª–∏–∑–∏—Ä—É–π—Ç–µ –¥–≤–∏–∂–µ–Ω–∏–µ –ª–∏–Ω–∏–π –∏ —Å—Ä–∞–≤–Ω–∏–≤–∞–π—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ä–∞–∑–Ω—ã—Ö –≤–∏–¥–æ–≤ —Å–ø–æ—Ä—Ç–∞.
      –î–∞–Ω–Ω—ã–µ –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è –∫–∞–∂–¥—ã–µ <b>10 —Å–µ–∫—É–Ω–¥</b> —Å –≤—ã—Å–æ–∫–æ–π —Ç–æ—á–Ω–æ—Å—Ç—å—é üìà
    </p>
  </div>
</div>
{% endblock %}

{% block scripts %}
<style>
/* --- shimmer —ç—Ñ—Ñ–µ–∫—Ç --- */
.shimmer {
  position: relative;
  overflow: hidden;
  background: #f6f7f8;
  background-image: linear-gradient(
    to right,
    #f6f7f8 0%,
    #edeef1 20%,
    #f6f7f8 40%,
    #f6f7f8 100%
  );
  background-repeat: no-repeat;
  background-size: 800px 100%;
  animation: shimmer 1.5s linear infinite;
  border-radius: 8px;
}
@keyframes shimmer {
  0% { background-position: -800px 0; }
  100% { background-position: 800px 0; }
}
.shimmer-container { padding: 10px; }
.shimmer-line { height: 16px; margin-bottom: 8px; border-radius: 6px; }

/* —ç—Ñ—Ñ–µ–∫—Ç –ø–æ—è–≤–ª–µ–Ω–∏—è —Ç–∞–±–ª–∏—Ü—ã */
.fade-in-table {
  animation: fadeIn 0.5s ease-in;
}
@keyframes fadeIn {
  from { opacity: 0; transform: translateY(5px); }
  to { opacity: 1; transform: translateY(0); }
}

/* –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã */
#matches-container table {
  width: 100%;
  border-collapse: collapse;
  margin-top: 15px;
  background: #fff9ef;
  border-radius: 10px;
  overflow: hidden;
  box-shadow: 0 0 8px rgba(0,0,0,0.05);
}
#matches-container th, #matches-container td {
  padding: 8px 10px;
  text-align: center;
  border-bottom: 1px solid #f1e6c4;
}
#matches-container th {
  background: #ffe082;
  font-weight: 600;
}
#matches-container tr:hover {
  background: #fff3d1;
}
</style>

<script>
document.addEventListener("DOMContentLoaded", () => {
  document.querySelectorAll(".fade-in, .fade-in-delay, .fade-in-slow, .fade-in-late")
    .forEach((el, i) => setTimeout(() => el.classList.add("visible"), 200 + i * 250));

  // --- shimmer-–∞–Ω–∏–º–∞—Ü–∏—è ---
  function showShimmer() {
    const container = document.getElementById("matches-container");
    container.innerHTML = `
      <div class="shimmer-container">
        <div class="shimmer shimmer-line" style="width: 90%; height: 20px;"></div>
        <div class="shimmer shimmer-line" style="width: 75%; height: 20px;"></div>
        <div class="shimmer shimmer-line" style="width: 85%; height: 20px;"></div>
        <div class="shimmer shimmer-line" style="width: 60%; height: 20px;"></div>
      </div>
    `;
  }

  async function loadMatches() {
    showShimmer();
    try {
      const response = await fetch("/api/matches");
      const data = await response.json();
      setTimeout(() => renderTable(data), 500); // –∏–º–∏—Ç–∞—Ü–∏—è –ø–ª–∞–≤–Ω–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
    } catch (error) {
      console.error("–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏:", error);
    }
  }

  function renderTable(matches) {
    const container = document.getElementById("matches-container");

    if (!matches || matches.length === 0) {
      container.innerHTML = "<p>–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è.</p>";
      return;
    }

    let html = `
      <table class="fade-in-table">
        <thead>
          <tr>
            <th>–°–ø–æ—Ä—Ç</th>
            <th>–õ–∏–≥–∞</th>
            <th>–î–æ–º</th>
            <th>–ì–æ—Å—Ç–∏</th>
            <th>–°—á—ë—Ç</th>
            <th>–í—Ä–µ–º—è</th>
          </tr>
        </thead>
        <tbody>
    `;

    matches.forEach(m => {
      html += `
        <tr>
          <td>${m.sport}</td>
          <td>${m.league}</td>
          <td>${m.home_team}</td>
          <td>${m.away_team}</td>
          <td>${m.score_home ?? "-"} : ${m.score_away ?? "-"}</td>
          <td>${m.start_time}</td>
        </tr>
      `;
    });

    html += "</tbody></table>";
    container.innerHTML = html;
  }

  // --- –∑–∞–ø—É—Å–∫ shimmer + –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∫–∞–∂–¥—ã–µ 10 —Å–µ–∫—É–Ω–¥ ---
  loadMatches();
  setInterval(loadMatches, 10000);
});
</script>
{% endblock %}
